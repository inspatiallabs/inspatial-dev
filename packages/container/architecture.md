┌─────────────────────────────────────────────┐ ┌─────────────────────────────────────┐
│ Client Browser │ │ Edge Network │
│ │ │ │
│ ┌─────────────────┐ ┌───────────────┐ │ │ ┌────────────────┐ │
│ │ WASM Runtime │ │ Service Worker│ │ │ │ Security Gateway│ │
│ │ (Lightweight │◄───┤ (State Cache &│ │ │ │ - Auth │ │
│ │ Code Execution)│ │ Persistence) │ │ │ │ - Rate Limiting │ │
│ └───────┬─────────┘ └───────────────┘ │ │ │ - WAF │ │
│ │ │ │ └────────┬───────┘ │
│ ┌───────▼─────────┐ │ │ │ │
│ │ IndexedDB │ │◄─────┼───────────┘ │
│ │ (Local State │ │ │ │
│ │ & File Cache) │ │ │ │
│ └───────┬─────────┘ │ └──────────────┬──────────────────────┘
│ │ │ │\
│ ┌───────▼─────────┐ │ ┌──────────────▼──────────────────────┐
│ │ WebSocket │ │ │ Container Orchestration Layer │
│ │ Connection ├───────────────────────┼─────►│ │
│ │ Manager │ │ │ ┌─────────────────┐ ┌─────────────┐ │
└──┴─────────────────┴───────────────────────┘ │ │ State │ │ Intrusion │ │
│ │ Synchronization │ │ Detection │ │
┌─────────────────────────────────────────────┐ │ │ Service │ │ System │ │
│ Distributed State Store │ │ └────────┬────────┘ └──────┬──────┘ │
│ │ │ │ │ │
│ ┌─────────────────┐ ┌───────────────┐ │ │ ┌────────▼─────────────────▼──────┐ │
│ │ Redis Cluster │ │ Change Stream │ │ │ │ Preemptible Container Pool │ │
│ │ (Session State ◄────┤ Processor │ │ │ │ │ │
│ │ & Code Cache) │ │ │ │ │ │ ┌──────────────┐ ┌───────────┐ │ │
│ └─────────────────┘ └───────────────┘ │ │ │ │ gVisor │ │ Deno │ │ │
│ │ │ │ │ Container ├─┤ Runtime │ │ │
└─────────────────────────────────────────────┘ │ │ │ │ │ │ │ │
│ │ └──────────────┘ └───────────┘ │ │
│ │ │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
